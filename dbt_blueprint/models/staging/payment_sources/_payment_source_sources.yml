version: 2

sources: 
  - name: payment_sources
    tags: ["payment_sources"]
    catalog: ingestion
    schema: dbt_blueprint_dummy_ingestion
    tables:
      - name: raw_account_events
        description: "Table containing raw account payment events"
        freshness:
          warn_after: {count: 24, period: hour}
          error_after: {count: 48, period: hour}
        columns:
          - name: eventId
            datatests:
              - not_null
              - unique 
          - name: payment_source_id
          - name: user_id
          - name: status
          - name: bic
          - name: bank_name
          - name: country_code
          - name: account_type
          - name: provider
          - name: created_time
          - name: updated_time
          - name: recorded_time

      - name: raw_card_events
        description: "Table containing raw card payment events"
        freshness:
          warn_after: {count: 24, period: hour}
          error_after: {count: 48, period: hour}
        columns:
          - name: eventId
            datatests:
              - not_null
              - unique 
          - name: payment_source_id
            datatests:
              - not_null
              - unique
          - name: user_id
          - name: status
          - name: brand
          - name: network
          - name: bin6
          - name: last4
          - name: expiry_month
          - name: expiry_year
          - name: issuer_country
          - name: tokenized
          - name: provider
          - name: created_time
          - name: updated_time
          - name: recorded_time